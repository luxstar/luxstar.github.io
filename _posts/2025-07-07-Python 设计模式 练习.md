---
title: Python 设计模式 练习
date: 2025-07-08 19:37:00 +0800
categories: [Python]
tags: [Python,设计模式]
---
好的，以下是围绕「Python 设计模式」的问题解析与练习设计，涵盖了你提出的五个方面：

---

### ✅ 一、什么是 Python 设计模式（关键词/命名原由来）

**设计模式（Design Pattern）** 是在软件工程中，前人总结出的在某些情境下可重复使用、通用的代码架构方案。它们起源于 1994 年《设计模式：可复用面向对象软件的基础》这本书（GoF 四人帮所著），意图解决软件开发中的常见设计问题。

在 Python 中，虽然语言具有高度的动态性和简洁语法，但设计模式依然重要——帮助你构建**结构清晰、可扩展、易维护的系统**。

---

### ✅ 二、为什么会出现这个问题

> **问题：什么时候需要用设计模式？为什么要用？**

当项目复杂度上升时（如多模块协作、频繁变动的需求、需要灵活拓展等），你可能会遇到：

* 模块间耦合过高，改动一个地方导致多处出错
* 重复代码，难以复用
* 无法灵活应对变化，如新增功能需要大量修改旧代码

**设计模式**为这些问题提供了解决方案，用**抽象、解耦、复用**等思想，使程序设计更健壮、灵活、可维护。

---

### ✅ 三、什么场景下会用到设计模式

不同设计模式适用于不同场景，举几个例子：

| 场景            | 合适的设计模式      |
| ------------- | ------------ |
| 创建对象过程复杂、灵活   | 工厂模式、建造者模式   |
| 多个对象间需要协调     | 观察者模式、发布订阅模式 |
| 系统中存在大量重复行为   | 策略模式、模板方法    |
| 需要动态添加/修改对象功能 | 装饰器模式        |
| 控制对某些资源的访问    | 单例模式、代理模式    |

Python 的一些内建特性（如装饰器、高阶函数）天然适配某些设计模式。

---

### ✅ 四、如何处理——常见的应对方法

1. **识别问题场景**

   * 比如：如果你在多个地方创建对象但初始化方式不同，就可以用工厂模式。
2. **选择合适的设计模式**

   * 避免为了用模式而用，设计模式是为了解决具体问题。
3. **结合 Python 特性灵活实现**

   * 比如装饰器可以用来实现装饰器模式，类变量可以辅助实现单例。
4. **优先使用标准库与简洁结构**

   * Python 是“优雅优先”的语言，有时候函数式编程也能解决 OO 中的设计问题。

---

### ✅ 五、最佳实践

| 建议               | 原因                     |
| ---------------- | ---------------------- |
| 先学会识别问题，再选择模式    | 不应“为了模式而模式”            |
| 使用 Pythonic 实现方式 | 比如用闭包/装饰器代替繁琐继承        |
| 不要过度设计           | YAGNI（你不会需要它）          |
| 多读源码，学习模式实际运用    | 如 Django 中大量使用工厂、策略等模式 |

---

### ✅ 六、循序渐进的练习题

#### 🟢 简单级别（理解与模仿）

1. **实现一个单例类**

   ```python
   # 要求：创建一个 Logger 类，始终返回同一个实例
   ```

2. **用函数装饰器模拟“权限验证”**

   ```python
   # 要求：定义一个装饰器，用于检查是否登录，未登录时打印提示
   ```

3. **实现一个简单工厂**

   ```python
   # 要求：实现一个工厂函数，根据字符串返回不同的“动物”对象（Dog, Cat）
   ```

---

#### 🟡 中等难度（理解模式意图并动手实现）

4. **策略模式：不同的折扣策略**

   ```python
   # 要求：写一个上下文类 Pricing，可注入不同的打折算法（比如 VIP 9折、新用户8折）
   ```

5. **观察者模式：实现简单订阅通知系统**

   ```python
   # 要求：有一个 NewsPublisher，可以注册多个 Subscriber，一有新闻通知他们
   ```

6. **装饰器模式：为函数动态添加日志功能**

   ```python
   # 要求：写一个装饰器，在函数调用前后打印函数名与时间
   ```

---

#### 🔴 高级难度（组合多个模式/解决真实问题）

7. **命令模式 + 工厂模式**

   ```python
   # 要求：设计一个任务队列系统，每个任务是一个“命令”，由工厂创建并执行
   ```

8. **实现一个支持回滚操作的系统（备忘录模式）**

   ```python
   # 要求：实现一个 TextEditor 类，可以输入文字，支持撤销
   ```

---

需要我为你提供任意一个练习题的详细解析或样例代码吗？我可以从简单到复杂逐一带你实现。
